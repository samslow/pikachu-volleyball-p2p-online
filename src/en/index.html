<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pikachu Volleyball P2P Online</title>
    <meta
      name="description"
      content="Play the game Pikachu Volleyball online via P2P (peer-to-peer) connection"
    />
    <meta name="author" content="Lee, Kyutae" />

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../resources/assets/images/IDI_PIKAICON-0.png"
    />
  </head>
  <body>
    <div id="before-connection">
      <div id="about-box-head">
        <h1>Pikachu Volleyball <span class="no-wrap">P2P Online</span></h1>
        <p class="languages">
          &check; English |
          <a href="../ko/" target="_self">Korean(한국어)</a>
        </p>
        <p class="offline-version">
          You can play
          <a href="https://gorisanson.github.io/pikachu-volleyball/en/"
            >the offline web version here</a
          >.
        </p>
        <p class="small"><a href="./replay/">Replay Viewer is here</a>.</p>
        <p class="original-by">
          The original Pikachu Volleyball (対戦ぴかちゅ～　ﾋﾞｰﾁﾊﾞﾚｰ編) was
          developed by<br />
          1997 (C)
          <span class="no-wrap">SACHI SOFT / SAWAYAKAN Programmers</span><br />
          1997 (C) <span class="no-wrap">Satoshi Takenouchi</span>
        </p>
        <p class="reverse-engineered-by">
          The original game was reverse engineered and implemented into<br />
          this P2P (peer-to-peer) online version by<br />
          <span class="no-wrap"
            ><a href="https://gorisanson.github.io/">Lee, Kyutae</a></span
          >
        </p>
        <p class="source-code-on">
          You can view the source code on
          <a
            href="https://github.com/gorisanson/pikachu-volleyball-p2p-online"
            target="_blank"
            rel="noopener"
            >GitHub</a
          >.
        </p>
        <p class="release-date">
          Release Date: 2020-04-08
        </p>
        <p class="game-last-updated">
          Game Last Updated: 2020-06-02
        </p>
        <p class="page-last-updated">
          Page Last Updated: 2020-06-19
        </p>
        <p class="update-history-on">
          <a href="./update-history/" target="_self">Update history</a>
        </p>
      </div>
      <div class="margin-top">
        <div>
          <div class="align-center-horizontally">
            <img
              class="screenshot"
              src="../resources/assets/images/screenshot.png"
              alt="Pikachu Volleyball game screenshot"
            />
          </div>
          <p>
            Pikachu Volleyball is an old Windows game which was developed in
            Japan in 1997. You can play this game here online by establishing a
            peer-to-peer connection with someone else also here.
          </p>
          <p>
            The latest version of the web browser is recommended. The latest
            versions of Chrome, Firefox and Safari browsers are checked and
            supported. Internet Explorer is not supported.
          </p>
        </div>
        <div>
          <p class="margin-top">
            <span class="thick">Notice:</span> This peer-to-peer online version
            is not playable under the following environment. (<a
              href="https://webrtc.org/"
              target="_blank"
              rel="noopener"
              >WebRTC</a
            >, which is a technology this P2P online version utilizes, cannot
            establish a
            <a
              href="https://en.wikipedia.org/wiki/Peer-to-peer"
              target="_blank"
              rel="noopener"
              >peer-to-peer</a
            >
            connection under the following environment.)
          </p>
          <ul>
            <li>
              If you are under a (corporate) firewall which blocks UDP ports
            </li>
            <li>
              If you are under a
              <a
                href="https://en.wikipedia.org/wiki/Network_address_translation#Methods_of_translation"
                target="_blank"
                rel="noopener"
                >symmetric NAT</a
              >
              (As an example, 3G, 4G or LTE cellular network is commonly under
              this environment.)
            </li>
          </ul>
          <p>
            By using the "Test network" button below, you can check your network
            about the two issues above.
          </p>
          <button type="button" id="network-test-btn">
            Test network
          </button>
        </div>
        <div>
          <p class="margin-top">
            <span class="thick">Controls:</span> Use the one comfortable for
            you. (In case of a touch/mobile device, you need a Bluetooth
            keyboard.)
          </p>
          <div class="align-center-horizontally">
            <img
              class="controls"
              src="../resources/assets/images/controls_online.png"
              alt="game controls"
            />
          </div>
        </div>
        <div>
          <p class="margin-top">
            <span class="thick">Replay:</span> When you click the "Save replay"
            button (which will appear above the game screen), a replay file
            &mdash; which covers from the start of the game to the moment you
            click the button &mdash; are saved. You can view the replay file by
            using the <a href="./replay/">Replay Viewer</a>.
          </p>
        </div>
        <div>
          <p class="margin-top">
            <span class="thick">Options:</span> You can check the options you
            want.
          </p>
          <div>
            <input id="auto-fast-speed-checkbox" type="checkbox" />
            <label for="auto-fast-speed-checkbox"
              >Automatically ask each peer about changing speed options to
              "fast". (If you and the peer both check this option, the game
              speed will be changed to "fast" without any additional
              messages.)</label
            >
          </div>
          <div class="margin-top-a-little">
            <input id="auto-save-replay-checkbox" type="checkbox" />
            <label for="auto-save-replay-checkbox"
              >Automatically save replay file when a connection with a peer
              ends. (In Chrome and Firefox browser, this option were checked to
              work properly. In Safari browser, this option malfunctions, so it
              is recommended to turn it off.)</label
            >
          </div>
        </div>
        <div>
          <p class="margin-top">
            <span class="thick">Nickname:</span> You can set your nickname
            below. (The default nickname is "Player".)<br />
            <span class="bold">There's no uniqueness checking!</span>
            So
            <span class="bold"
              >it does not mean you met the same peer even if they use the same
              nickname.</span
            >
            You can <span class="bold">loosely</span> identify the peers you met
            on Quick Match by the partial public IP address shown below the
            nickname.
          </p>
          <div class="nickname-input-container">
            <label for="nickname-input">Nickname (maximum 8 characters)</label>
            <input
              type="text"
              id="nickname-input"
              maxlength="8"
              autocapitalize="none"
              autocomplete="off"
              autocorrect="off"
              value="Player"
            />
          </div>
        </div>
      </div>
      <div class="margin-top grid-1-1">
        <button id="quick-match-btn">Quick Match (Enter)</button>
        <button id="with-your-friend-btn">With one of your friends</button>
      </div>
      <div id="about-with-your-friend" class="margin-top hidden">
        <div>
          <p>
            <span class="thick"
              >How to play online with one of your friends:</span
            >
          </p>
          <p>
            <span class="thick">Room Creator</span> - Click "create room"
            button. Then, send the Room ID (via a messenger, email or whatever)
            to the one ("Joiner") you want to play this game online with.
          </p>
          <p>
            <span class="thick">Joiner</span> - Copy and paste the received Room
            ID into the text input box left of the "join room" button, and click
            the "join room" button. Then connection process will be started.
          </p>
          <p class="margin-top">
            <span class="thick">Notice:</span> The connection will be
            established in about 5-10 seconds after the joiner clicked the "join
            room" button. If the game is not started after the waiting time, it
            indicates that the connection failed.
          </p>
        </div>
        <div id="create-btn-with-created-room-id" class="margin-top">
          <button type="button" id="create-btn">create room</button>
          <div id="created-room-id-container">
            <span class="margin-left-right">Room ID:</span>
            <span id="current-room-id"></span>
            <button type="button" id="copy-btn">Copy</button>
          </div>
        </div>
        <div id="room-id-with-join-btn">
          <label for="join-room-id-input">Room ID to join</label>
          <input
            type="text"
            id="join-room-id-input"
            maxlength="30"
            autocapitalize="none"
            autocomplete="off"
            autocorrect="off"
          />
          <button type="button" id="join-btn">join room</button>
        </div>
        <div class="margin-top log">
          <p>
            <span class="thick">Connection Log:</span>
          </p>
          <div id="connection-log-with-friend" class="pre-wrap"></div>
        </div>
      </div>
      <div
        id="press-enter-to-quick-match"
        class="fade-in-box notice fixed hidden"
      >
        <p>
          <span class="thick">Press "Enter" key</span> to start Quick Match.<br />
          (It is for preventing devices without a keyboard from doing quick
          match.)
        </p>
        <button id="cancel-quick-match-btn" class="btn-in-box large">
          cancel <span class="no-wrap">Quick Match</span>
        </button>
      </div>
      <div
        id="quick-match-notice-box"
        class="fade-in-box notice fixed scroll hidden"
      >
        <div>
          <span class="thick"
            >Number of matches connected by<br />
            Quick Match within the last..</span
          >
          <ul>
            <li>24 hours: <span id="within-24-hours"></span></li>
            <li>1 hour: <span id="within-1-hour"></span></li>
            <li>10 minutes: <span id="within-10-minutes"></span></li>
          </ul>
        </div>
        <div>
          <p>
            <span class="thick">Quick Match Log:</span>
          </p>
          <p>
            Number of communication with the quick match server:
            <span id="communication-count">0</span>
          </p>
          <div id="quick-match-log" class="pre-wrap"></div>
        </div>
        <div class="log">
          <p>
            <span class="thick">Connection Log:</span>
          </p>
          <div id="connection-log-quick-match" class="pre-wrap"></div>
        </div>
        <button id="cancel-quick-match-btn-2" class="btn-in-box large">
          cancel <span class="no-wrap">Quick Match</span>
        </button>
      </div>
      <div id="container-for-margin"></div>
      <div id="waiting-message" class="hidden">
        Waiting for someone to come here to play Pikachu Volleyball...
      </div>
      <div id="waiting-peer-to-connect-message" class="hidden">
        Found a peer. (If the game is not started in about 20 seconds after this
        message appers, it means the connection failed.)
      </div>
      <div id="connect-to-peer-after-a-while-message" class="hidden">
        Found a peer. It will connect to them after 5 seconds.
      </div>
      <div id="connect-to-peer-message" class="hidden">
        Now connecting to a peer... (If the game is not started in about 20
        seconds after this message appers, it means the connection failed.)
      </div>
      <div id="abandoned-message" class="hidden">
        Disconnected from the quick match server.
      </div>
      <div id="failed-to-connect-to-server" class="hidden">
        Failed to connect to the quick match server.
      </div>
      <div id="not-valid-room-id-message" class="hidden">
        The room ID format is not valid. Please check the entered room ID.
      </div>
      <div id="no-room-matching-message" class="hidden">
        There is no room matching the ID. Please check the entered room ID.
      </div>
      <div id="no-room-matching-message-in-quick-match" class="hidden">
        The peer already clicked the "cancel Quick Match" button.
      </div>
      <div id="someone-esle-already-joined-the-room" class="hidden">
        The room matching the ID is already joined by someone else.
      </div>
      <div id="connection-failed" class="hidden">
        Connection failed.
      </div>
      <div id="replay-viewer-at" class="hidden">
        Replay Viewer at:
        https://gorisanson.github.io/pikachu-volleyball-p2p-online/en/replay/
      </div>
      <audio
        id="audio-pikachu-sound"
        class="hidden"
        preload="auto"
        src="../resources/assets/sounds/WAVE144_1.wav"
      ></audio>
      <div id="test-passed" class="fade-in-box notice fixed hidden">
        No issues are detected.<br /><br />
        (1) The necessary server reflexive candidate can be gotten, or your
        computer is assigned a public IP address. (UDP ports are open.)<br /><br />
        (2) Your network is not behind a symmetric NAT.
        <button id="test-passed-ok-btn" class="btn-in-box">
          OK
        </button>
      </div>
      <div
        id="did-not-get-srflx-candidate"
        class="fade-in-box notice fixed hidden"
      >
        <div>
          This P2P online version is not going to work on your network.<br /><br />
          The necessary server reflexive candidate can't be gotten. Maybe the
          reason is that the necessary UDP ports are blocked. If you connected
          via a corporate network, maybe the firewall is blocking the UDP
          ports.<br /><br />
          If you see this message after following the troubleshooting in the
          case of your public IP address being obfuscated by the browser,
          there's no more to do if you are not an administrator of the corporate
          network. It is recommended that, on the Chrome browser, visit the page
          <a
            href="chrome://flags/#enable-webrtc-hide-local-ips-with-mdns"
            target="_blank"
            rel="noopener"
            >chrome://flags/#enable-webrtc-hide-local-ips-with-mdns</a
          >
          (by copying and pasting the address) and turn back the setting of
          "Anonymize local IPs exposed by WebRTC" to "Default".
        </div>
        <button id="did-not-get-srflx-candidate-ok-btn" class="btn-in-box">
          OK
        </button>
      </div>
      <div
        id="did-not-get-srflx-candidate-and-host-address-is-obfuscated"
        class="fade-in-box notice fixed hidden"
      >
        <div>
          This P2P online version is not going to work on your network. It is
          one of the following two cases. It is recommended that, first, do the
          troubleshooting on (2).<br /><br />
          (1) The necessary server reflexive candidate can't be gotten. Maybe
          the reason is that the necessary UDP ports are blocked. If you
          connected via a corporate network, maybe the firewall is blocking the
          UDP ports.<br /><br />
          (2) If your computer is assigned a public IP address (since your
          computer is connected directly to the internet without a router), the
          server reflexive candidate is not necessary. But it can be the case
          the public IP address is obfuscated to mDNS by the web browser since
          it is somehow treated as a local IP address. In this case, on the
          Chrome browser, visit the page
          <a
            href="chrome://flags/#enable-webrtc-hide-local-ips-with-mdns"
            target="_blank"
            rel="noopener"
            >chrome://flags/#enable-webrtc-hide-local-ips-with-mdns</a
          >
          (by copying and pasting the address) and change the setting of
          "Anonymize local IPs exposed by WebRTC" to "Disabled". Then, this P2P
          online version would work.
        </div>
        <button
          id="did-not-get-srflx-candidate-and-host-address-is-obfuscated-ok-btn"
          class="btn-in-box"
        >
          OK
        </button>
      </div>
      <div id="behind-symmetric-nat" class="fade-in-box notice fixed hidden">
        This P2P online version is not going to work on your network.<br /><br />
        Your network is behind a symmetric NAT.
        <button id="behind-symmetric-nat-ok-btn" class="btn-in-box">
          OK
        </button>
      </div>
    </div>
    <div id="flex-container" class="hidden">
      <div id="menu-bar">
        <div class="btn-container left">
          <div class="relative-container">
            <button id="options-dropdown-btn" class="btn dropdown-btn">
              Options
            </button>
            <div id="options-dropdown" class="dropdown">
              <div class="relative-container">
                <button id="bgm-submenu-btn" class="btn submenu-btn">
                  BGM &#9654;
                </button>
                <div id="bgm-submenu" class="submenu">
                  <button id="bgm-on-btn" class="btn selected">
                    <span class="check">&check; </span>on
                  </button>
                  <button id="bgm-off-btn" class="btn">
                    <span class="check">&check; </span>off
                  </button>
                </div>
              </div>
              <div class="relative-container">
                <button id="sfx-submenu-btn" class="btn submenu-btn">
                  SFX &#9654;
                </button>
                <div id="sfx-submenu" class="submenu">
                  <button id="stereo-btn" class="btn selected">
                    <span class="check">&check; </span>stereo
                  </button>
                  <button id="mono-btn" class="btn">
                    <span class="check">&check; </span>mono
                  </button>
                  <button id="sfx-off-btn" class="btn">
                    <span class="check">&check; </span>off
                  </button>
                </div>
              </div>
              <div class="relative-container">
                <button id="speed-submenu-btn" class="btn submenu-btn">
                  Speed &#9654;
                </button>
                <div id="speed-submenu" class="submenu">
                  <button id="slow-speed-btn" class="btn">
                    <span class="check">&check; </span>slow
                  </button>
                  <button id="medium-speed-btn" class="btn selected">
                    <span class="check">&check; </span>medium
                  </button>
                  <button id="fast-speed-btn" class="btn">
                    <span class="check">&check; </span>fast
                  </button>
                </div>
              </div>
              <div class="relative-container">
                <button id="winning-score-submenu-btn" class="btn submenu-btn">
                  Winning score &#9654;
                </button>
                <div id="winning-score-submenu" class="submenu">
                  <button id="winning-score-5-btn" class="btn">
                    <span class="check">&check; </span>5 pts
                  </button>
                  <button id="winning-score-10-btn" class="btn">
                    <span class="check">&check; </span>10 pts
                  </button>
                  <button id="winning-score-15-btn" class="btn selected">
                    <span class="check">&check; </span>15 pts
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="relative-container">
            <button id="save-replay-btn" class="btn">Save replay</button>
          </div>
        </div>
        <div class="btn-container right">
          <button id="exit-btn" class="btn">Exit</button>
        </div>
      </div>
      <div id="game-canvas-container">
        <div id="player1-chat-box" class="chat-box pre-wrap hidden"></div>
        <div id="player2-chat-box" class="chat-box pre-wrap hidden"></div>
        <div class="nicknames-container">
          <div class="nickname-and-partial-ip left">
            <span id="player1-nickname" class="nickname"></span>
            <span id="player1-partial-ip" class="partial-ip"></span>
          </div>
          <div class="nickname-and-partial-ip right">
            <span id="player2-nickname" class="nickname"></span>
            <span id="player2-partial-ip" class="partial-ip"></span>
          </div>
        </div>
        <div class="fade-in-box loading black" id="loading-box">
          <div>
            <p>Loading the game assets...</p>
            <div id="progress-bar-border">
              <div id="progress-bar" style="width: 0%;"></div>
            </div>
          </div>
          <div>
            Menu description<br /><br />
            <span class="no-wrap">"2人でぴかちゅ~"</span>(upper) - Keep the
            current side of play<br />
            <span class="no-wrap">"2人でぴかちゅ~"</span>(lower) - Swap the side
            of play
          </div>
        </div>
        <div class="fade-in-box peer-loading black" id="peer-loading-box">
          <div>
            <p>Waiting for the peer to load the game assets...</p>
          </div>
        </div>
        <div class="fade-in-box ping black" id="ping-box">
          <div>
            <p>Average ping: <span id="average-ping"></span> ms</p>
            <p>If the ping is over 100 ms, the game play can be unstable.</p>
            <p>
              If the physical distance from the peer is far (e.g. across
              continents and oceans),<br />
              the ping can be high.
            </p>
            <p>The game starts in <span id="starts-in"></span> seconds.</p>
          </div>
        </div>
        <div
          class="fade-in-box notice hidden"
          id="ask-options-change-send-to-peer"
        >
          <div>
            <p id="options-change-to-send"></p>
            <p>
              You want to change the option like above. After asking the peer
              about the change, the option will be changed if only the peer
              agrees. Do you want to proceed?
            </p>
          </div>
          <div class="grid-1-1 center">
            <button
              id="ask-options-change-send-to-peer-yes-btn"
              class="btn-in-box"
            >
              Proceed
            </button>
            <button
              id="ask-options-change-send-to-peer-no-btn"
              class="btn-in-box"
            >
              Nope
            </button>
          </div>
        </div>
        <div
          class="fade-in-box notice hidden"
          id="ask-options-change-received-from-peer"
        >
          <div>
            <p id="options-change-received"></p>
            <p>
              The peer want to change the option like above. Only if you agree,
              the option will be changed. Do you agree?
            </p>
          </div>
          <div class="grid-1-1 center">
            <button
              id="ask-options-change-received-from-peer-yes-btn"
              class="btn-in-box"
            >
              Agree
            </button>
            <button
              id="ask-options-change-received-from-peer-no-btn"
              class="btn-in-box"
            >
              Nope
            </button>
          </div>
        </div>
        <div class="fade-in-box notice hidden" id="notice-peer-agreed">
          <p>
            Peer agreed about changing the option.<br />
            It was applied successfully.
          </p>
          <button id="notice-peer-agreed-ok-btn" class="btn-in-box">OK</button>
        </div>
        <div class="fade-in-box notice hidden" id="notice-peer-disagreed">
          <p>
            Peer did not agree about changing the option.
          </p>
          <button id="notice-peer-disagreed-ok-btn" class="btn-in-box">
            OK
          </button>
        </div>
        <div
          class="fade-in-box notice hidden"
          id="notice-speed-options-cannot-changed-if-game-in-progress"
        >
          <p>
            Speed option cannot be changed when the game is in progress. Please
            retry after the game is finished.
          </p>
          <button
            id="notice-speed-options-cannot-changed-if-game-in-progress-ok-btn"
            class="btn-in-box"
          >
            OK
          </button>
        </div>
        <div
          class="fade-in-box notice hidden"
          id="notice-winning-score-options-cannot-changed-if-game-in-progress"
        >
          <p>
            Winning score option cannot be changed when the game is in progress.
            Please retry after the game is finished.
          </p>
          <button
            id="notice-winning-score-options-cannot-changed-if-game-in-progress-ok-btn"
            class="btn-in-box"
          >
            OK
          </button>
        </div>
        <div class="fade-in-box notice hidden" id="notice-disconnected">
          <p>
            Disconnected from the peer.
          </p>
          <button id="notice-disconnected-ok-btn" class="btn-in-box">OK</button>
        </div>
        <div class="fade-in-box notice hidden" id="ask-one-more-game">
          <p>
            Play one more game with the peer?
          </p>
          <div class="grid-1-1 center">
            <button id="ask-one-more-game-yes-btn" class="btn-in-box">
              One more!
            </button>
            <button id="ask-one-more-game-no-btn" class="btn-in-box">
              Nope
            </button>
          </div>
        </div>
      </div>
      <div id="chat-input-here">
        <div id="chat-input-and-send-btn-container" class="hidden">
          <input
            type="text"
            id="chat-input"
            maxlength="50"
            autocapitalize="none"
            autocomplete="off"
            autocorrect="off"
          />
          <button type="button" id="send-btn">send (Enter)</button>
        </div>
        <div id="chat-open-btn-and-chat-disabling-btn-container">
          <button id="chat-open-btn">Chat (space bar)</button>
          <button type="button" id="chat-disabling-btn">Disable chat</button>
          <div id="text-disable-chat" class="hidden">Disable chat</div>
          <div id="text-enable-chat" class="hidden">Enable chat</div>
        </div>
      </div>
    </div>
  </body>
</html>
